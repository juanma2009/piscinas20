<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/layoutMcompras :: head">

    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        // Campos Nombres
        $(document).ready(function () {
            $("input[name=anticipo1]").change(function () {
                alert($(this).val());
            });
        });
    </script>
    <style>
        table {
            border: none;
            width: 100%;
            border-collapse: collapse;
        }

        th {
            padding: 5px 10px;
            text-align: center;
            border: 1px solid #999;
        }

        tr:nth-child(1) {
            background: #dedede;
        }
    </style>
</head>
<body>

<header th:replace="layout/layoutMcompras :: header"></header>

<div class="container py-4">
    <div class="card bg-light">
        <div class="card-header" th:text="'Crear Albaran del Pedido'"></div>
        <div class="card-body">
            <form th:action="@{/facturas/form/}" enctype="multipart/form-data" th:object="${factura}" method="post">

                <div class="form-group row">
                    <label for="cliente" class="col-sm-2 col-form-label" th:text="'Cliente'"></label>
                    <div class="col-sm-4">
                        <input name="cliente" th:value="${factura.cliente.nombre} + ' ' + ${factura.cliente.apellido}" class="form-control" disabled='disabled'/>
                    </div>
                    <label class="col-sm-2 col-form-label" th:text="'Número de Pedido'"></label>
                    <div class="col-sm-2">
                        <input type="text" th:value="${factura.npedido}" name ="npedido" id="npedido" disabled="disabled" class="form-control" />
                        <input type="hidden" th:value="${factura.npedido}" name ="npedido"   class="form-control" />
                    </div>
                </div>

                <hr>

                <div class="form-group row">
                    <label for="dfechaAlbaran" class="col-sm-2 col-form-label">Fecha de Pedido</label>
                    <div class="col-sm-2">
                        <input type="text" th:value="${factura.dfechaAlbaran}" disabled="disabled" class="form-control" />
                    </div>

                    <label for="tipoPedido" class="col-sm-2 col-form-label" th:text="'Tipo de Pedido'"></label>
                    <div class="col-sm-2">
                        <input type="text" th:value="${factura.tipoPedido}" disabled="disabled" class="form-control" />
                    </div>
                </div>
    <hr>
                <div class="form-group row">
                    <label for="buscar_producto" class="col-sm-2 col-form-label" th:text="'Producto'"></label>
                    <div class="col-sm-4">
                        <input type="text" name="buscar_producto" id="buscar_producto" class="form-control"/>
                    </div>
                </div>
            <div class="form-group row">

                <table th:replace="factura/plantilla-items :: itemsFactura"></table>
                <table id="cargarItemProductos" class="table table-sm table-striped table-hover">
                    <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Precio</th>
                        <th>Cantidad</th>
                        <th></th>
                        <th>Total</th>
                        <th>Eliminar</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>



                <div class="form-group row">
                    <label for="observacion" class="col-sm-10 col-form-label" th:text="'Observación'"></label>
                    <div class="col-sm-12">
                        <textarea th:field="*{observacion}" class="form-control"></textarea>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-sm-6">
                        <input type="submit" th:value="${titulo}" class="btn btn-secondary"/>
                    </div>
                </div>

                <input type="hidden" id="anticipo" value='0'/>
                <input type="hidden" th:field="*{total}" id="total_iva"/>
                <input type="hidden" th:field="*{ivaTotal}" id="ivaprecio"/>

            </form>
            <section>
                <div class="clearfix"></div>

                <div class="float-right">
                    <table class="table table-striped table-hover table-bordered my-1">
                        <thead>
                        <tr>
                            <td class="col-sm-2">SubTotal</td>
                            <td width=75><h6><span class="col-sm-2" id="gran_total"></span></h6></td>
                        </tr>
                        <tr>
                            <td class="col-sm-2">Iva</td>
                            <td width=75><h6><span type="hidden" class="col-sm-2" id="base_ival"></span></h6></td>
                        </tr>
                        <tr>
                            <th class="col-sm-2">Total</th>
                            <th width=75><span class="col-sm-2" id="gran_total_iva"></span></th>
                        </tr>
                        </thead>

                    </table>
                </div>
            </section>
        </div>
    </div>
</div>

<footer th:replace="layout/layoutMcompras :: footer"></footer>
<script th:replace="factura/js/autocomplete-productos :: javascript"></script>

</body>
</html>
<!-- Compare this snippet from src/main/resources/templates/factura/form.html: -->