# Perfil por defecto (NO meter esto en application-local/prod)
spring.profiles.active=${SPRING_PROFILES_ACTIVE:local}

# Puerto (Heroku usa PORT)
server.port=${PORT:8080}

# ----------------------
# BBDD (Postgres)
# ----------------------
spring.datasource.url=${SPRING_DATASOURCE_URL:}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.jpa.database=POSTGRESQL
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update

spring.thymeleaf.cache=true
spring.thymeleaf.encoding=UTF-8

# ----------------------
# Subida de archivos
# ----------------------
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=500MB
spring.servlet.multipart.file-size-threshold=1MB

# ----------------------
# Timeouts / Tomcat
# ----------------------
server.tomcat.connection-timeout=180000
server.tomcat.keep-alive-timeout=180000
server.tomcat.threads.max=200
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=120s

# ----------------------
# Sesiones
# ----------------------
server.servlet.session.timeout=1000s

# ----------------------
# Redis / Cache
# ----------------------


spring.redis.url=${SPRING_REDIS_HOST}


#redis
spring.redis.host=${SPRING_REDIS_HOST}
spring.redis.port=6379
spring.cache.type=redis
# ----------------------
# Cloudinary (por ENV)
# ----------------------
spring.cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME:}
spring.cloudinary.api-key=${CLOUDINARY_API_KEY:}
spring.cloudinary.api-secret=${CLOUDINARY_API_SECRET:}
cloudinary.upload-preset=${CLOUDINARY_UPLOAD_PRESET:}

# ----------------------
# HikariCP
# ----------------------
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.idle-timeout=100000
spring.datasource.hikari.max-lifetime=200000
spring.datasource.hikari.connection-timeout=300000
spring.datasource.hikari.validation-timeout=50000
spring.datasource.hikari.connection-test-query=SELECT 1
spring.jpa.open-in-view=false
logging.level.com.zaxxer.hikari=DEBUG

# ----------------------
# Compresión / Tomcat tuning
# ----------------------
server.compression.enabled=true
server.compression.min-response-size=1024
server.tomcat.threads.min-spare=50
server.tomcat.accept-count=100
server.tomcat.max-connections=10000

# ----------------------
# Mail (por ENV)
# ----------------------
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.default-encoding=UTF-8
spring.mail.username=${MAIL_USER:}
spring.mail.password=${MAIL_PASS:}

logging.level.org.springframework.mail=DEBUG
logging.level.com.sun.mail.smtp=DEBUG

# ----------------------
# INFOBIP 2FA (por ENV)
# ----------------------
infobip.auth-token=${INFOBIP_AUTH_TOKEN:}
infobip.application-id=${INFOBIP_APPLICATION_ID:2FA}
infobip.message-id=${INFOBIP_MESSAGE_ID:}
infobip.from=${INFOBIP_FROM:}
infobip.to=${INFOBIP_TO:}

# ----------------------
# Google OAuth (por ENV)
# ----------------------
GOOGLE_CLIENT_ID=${GOOGLE_OAUTH_CLIENT_ID:}
GOOGLE_API_KEY=${GOOGLE_PICKER_API_KEY:}

google.oauth.client-id=${GOOGLE_OAUTH_CLIENT_ID:}
google.oauth.client-secret=${GOOGLE_OAUTH_CLIENT_SECRET:}
google.oauth.token-uri=https://oauth2.googleapis.com/token

# ----------------------
# Logging
# ----------------------
logging.level.root=INFO
logging.level.com.bolsadeideas.springboot.app=DEBUG
