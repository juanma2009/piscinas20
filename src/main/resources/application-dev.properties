# ======================
# COMMON (NO secrets)
# ======================

spring.thymeleaf.cache=false

spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database=POSTGRESQL

spring.redis.url=${SPRING_REDIS_URL:}


# Multipart (subida de archivos)
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=500MB
spring.servlet.multipart.file-size-threshold=1MB

# Timeouts / Tomcat (útil en Heroku + Drive)
server.tomcat.connection-timeout=180000
server.tomcat.keep-alive-timeout=180000
server.tomcat.threads.max=200
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=120s

# Compresión
server.compression.enabled=true
server.compression.min-response-size=1024

# Tomcat tuning
server.tomcat.threads.min-spare=50
server.tomcat.accept-count=100
server.tomcat.max-connections=10000

# Thymeleaf / Encoding
spring.thymeleaf.encoding=UTF-8

# Sesiones
server.servlet.session.timeout=1000s

# JPA
spring.jpa.open-in-view=false

# Redis cache (lo usas en ambos; en DEV puede ser localhost, en PROD por URL)
spring.cache.type=redis

# ----------------------
# CLOUDINARY (por ENV)
# ----------------------
spring.cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME:}
spring.cloudinary.api-key=${CLOUDINARY_API_KEY:}
spring.cloudinary.api-secret=${CLOUDINARY_API_SECRET:}
cloudinary.upload-preset=${CLOUDINARY_UPLOAD_PRESET:}

# ----------------------
# MAIL (por ENV)
# ----------------------
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.default-encoding=UTF-8

spring.mail.username=${MAIL_USER:}
spring.mail.password=${MAIL_PASS:}

# Logs mail (si molesta en prod, lo bajas en application-prod)
logging.level.org.springframework.mail=${LOG_MAIL_LEVEL:INFO}
logging.level.com.sun.mail.smtp=${LOG_SMTP_LEVEL:INFO}

# ----------------------
# INFOBIP 2FA (por ENV)
# ----------------------
infobip.auth-token=${INFOBIP_AUTH_TOKEN:}
infobip.application-id=${INFOBIP_APPLICATION_ID:2FA}
infobip.message-id=${INFOBIP_MESSAGE_ID:}
infobip.from=${INFOBIP_FROM:}
infobip.to=${INFOBIP_TO:}

# ----------------------
# GOOGLE OAUTH (por ENV)
# ----------------------
google.oauth.client-id=${GOOGLE_OAUTH_CLIENT_ID:}
google.oauth.client-secret=${GOOGLE_OAUTH_CLIENT_SECRET:}
google.oauth.token-uri=https://oauth2.googleapis.com/token

# Logging base
logging.level.root=INFO
logging.level.com.bolsadeideas.springboot.app=DEBUG
